@using CsvImportSite.ViewModels;
@{
	ViewData["Title"] = "Home Page";
}
@model IndexViewModel;
<body>
	<script src="~/js/TableProcessorScript.js"></script>
	<div class="container-fluid d-inline">
		<form method="post" asp-controller="Home" asp-action="Index" enctype="multipart/form-data">
			<div class="row">
				<input class="form-control w-75" asp-for="CsvFile" type="file" accept=".csv" placeholder="Select csv file" />
				<button class="btn btn-outline-primary mx-2" style="width: 22%" type="submit">Add rows from file</button>
				<span asp-validation-for="CsvFile" class="text-danger"></span>
			</div>
		</form>
		@if (TempData["error"] != null)
		{
			<div class="alert alert-danger my-3">@TempData["error"]</div>
		}
		@if (TempData["success"] != null)
		{
			<div class="alert alert-success my-3">@TempData["success"]</div>
		}
		<hr />
		<div class="navbar">
			<h4>Employees</h4>
			<div class="d-inline-flex">
				<h6>Show per page:</h6>
				<select id="form-select-employees">
					<option value="10" selected>10</option>
					<option value="20">20</option>
					<option value="30">30</option>
				</select>
			</div>
			<div class="d-inline-flex">
				<h6>Search by:</h6>
				<select id="searchBy">
					<option value="0">Payroll number</option>
					<option value="1" selected>First name</option>
					<option value="2">Last name</option>
					<option value="9">Email</option>
					<option value="10">Start date</option>
				</select>
			</div>
			<form class="me-0">
				<input placeholder="Search" id="search-in-table">
			</form>
		</div>

		<table class="table table-striped table-sm w-100 py-5" id="Employees">
			<thead>
				<tr>
					<th>Payroll number</th>
					<th>First name</th>
					<th>Surname</th>
					<th>Date of birth</th>
					<th>Telephone</th>
					<th>Mobile</th>
					<th>Address</th>
					<th>Address 2</th>
					<th>Post code</th>
					<th>email</th>
					<th>Start date</th>
					<th>Controls</th>
				</tr>
			</thead>
			<tbody>
				@if (Model.Employees != null && Model.Employees.Count() > 0)
				{
					@foreach (var employee in Model.Employees)
					{
						<tr>
							<td>@employee.Payroll_Number</td>
							<td>@employee.Forenames</td>
							<td>@employee.Surname</td>
							<td>@DateOnly.FromDateTime(employee.Date_of_Birth)</td>
							<td>@employee.Telephone</td>
							<td>@employee.Mobile</td>
							<td>@employee.Address</td>
							<td>@employee.Address_2</td>
							<td>@employee.Postcode</td>
							<td>@employee.EMail_Home</td>
							<td>@DateOnly.FromDateTime(employee.Start_Date)</td>
							<td>
								<a class="btn btn-secondary" asp-action="Edit" asp-route-id="@employee.Payroll_Number">Edit</a>
							</td>
						</tr>
					}
				}
				else
				{
					<tr>
						<td colspan="12">There are no records here yet</td>
					</tr>
				}
			</tbody>
			<tfoot>
			</tfoot>
		</table>
	</div>
	@section Scripts{

		@{
			<partial name="_ValidationScriptsPartial" />
		}
	}
</body>


